# Run on port 8081 to avoid conflict with frontend dev server
server.port=8081

# Datasource: prefer JDBC_DATABASE_URL env var (e.g. jdbc:mysql://host:3306/studio)
# Fallback to a file-backed H2 DB for local development
spring.datasource.url=${JDBC_DATABASE_URL:jdbc:h2:file:./data/devdb}
spring.datasource.username=${JDBC_DATABASE_USERNAME:sa}
spring.datasource.password=${JDBC_DATABASE_PASSWORD:}
spring.datasource.driverClassName=${JDBC_DATABASE_DRIVER:org.h2.Driver}

# JPA / Hibernate
# During development H2 uses 'update' to auto-create tables; when using an external RDBMS,
# Flyway will run migrations and ddl-auto can remain 'none' or 'validate'. You can override
# by setting the JPA_HBM2DDL env variable.
spring.jpa.hibernate.ddl-auto=${JPA_HBM2DDL_AUTO:update}
spring.jpa.show-sql=true

# Flyway migrations: disable for H2 dev mode (enable for production MySQL)
spring.flyway.enabled=false
spring.flyway.locations=classpath:db/migration

# H2 Console (for viewing database in browser)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=false

# JWT settings (dev only) - replace secret in production with an env var
# Must be at least 256 bits (32 characters) for HS256 algorithm
jwt.secret=${JWT_SECRET:my-super-secret-jwt-key-for-development-only-minimum-32-characters}
jwt.expiration-ms=${JWT_EXPIRATION_MS:86400000}
